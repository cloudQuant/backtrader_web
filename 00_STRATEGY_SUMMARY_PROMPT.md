# 📝 策略归纳总结提示词文档

**目的**: 指导 Claude（或其他 AI 模型）为 `/home/yun/Documents/backtrader_web/strategies` 文件夹中的策略文件生成**高质量、详细的策略文档**。

**使用场景**: 当有新的策略 HTML 文件需要转换为 Markdown 格式的策略文档时使用此提示词。

---

## 📋 **1. 任务概述**

### 1.1 目标
为 `/home/yun/Documents/backtrader_web/strategies` 文件夹中的每个策略 HTML 文件生成**高质量、详细、专业的 Markdown 格式策略文档**。

### 1.2 输入
- **输入目录**: `/home/yun/Downloads/论文/论文` (HTML 文件所在目录）
- **输出目录**: `/home/yun/Documents/backtrader_web/strategies` (Markdown 文档输出目录)
- **进度文件**: `/home/yun/Documents/backtrader_web/strategies/99_PROGRESS.json` (进度追踪文件)

### 1.3 输出
- **文档格式**: Markdown (`.md`)
- **文档内容**: 高质量、详细的策略文档（见第 2 部分）
- **文件命名**: `XXX_Strategy_Name.md` (XXX = 索引，Strategy_Name = 策略名称)

---

## 📋 **2. 高质量策略文档结构**

每个生成的 Markdown 文档应包含以下部分：

### 2.1 标题
```markdown
# 策略名称

**策略类型**: 策略类型（如动量策略、均值回归、突破策略等）
**策略子类**: 策略子类（如趋势跟踪、均值回归、统计套利等）
**原始文件**: 原始 HTML 文件名
```

### 2.2 策略概述
```markdown
## 📋 策略概述

### 核心思想
[简明扼要地描述策略的核心思想和逻辑]

### 策略优势
- ✅ [优势 1]
- ✅ [优势 2]
- ✅ [优势 3]

### 策略特点
- [特点 1]
- [特点 2]
- [特点 3]
```

### 2.3 策略逻辑
```markdown
## 🧠 策略逻辑

### 核心步骤
[详细描述策略的核心步骤和逻辑流程]

### 技术指标
[列出策略使用的技术指标，如移动平均、RSI、MACD、布林带等]

### 信号生成
[详细描述如何生成买入/卖出/持有信号]

### 仓位管理
[详细描述如何管理仓位，如何计算仓位大小]

### 风险控制
[详细描述如何进行风险控制，如止损、止盈、跟踪止损等]
```

### 2.4 需要的数据
```markdown
## 📊 需要的数据

### 价格数据（必需）
[列出策略所需的价格数据，如 OHLC 数据、成交量数据等]

### 指标数据（推荐）
[列出策略所需的指标数据，如技术指标、市场指标等]

### 基本面数据（可选）
[列出策略可能需要的基本面数据，如财报数据、分红数据等]

### 宏观经济数据（可选）
[列出策略可能需要的宏观经济数据，如利率、通胀率、GDP 等]
```

### 2.5 策略有效性原因
```markdown
## ✅ 策略有效性原因

### 理论支撑
[详细描述策略的理论支撑，如学术研究、数学模型等]

### 实证证据
[详细描述策略的实证证据，如历史回测结果、实盘表现等]

### 学术研究
[列出支持策略有效性的学术研究和论文]

### 行业应用
[详细描述策略在行业中的应用和案例]
```

### 2.6 风险和注意事项
```markdown
## ⚠️ 风险和注意事项

### 市场风险
[详细描述市场风险，如市场环境变化、黑天鹅事件等]

### 策略风险
[详细描述策略风险，如模型风险、过拟合风险等]

### 执行风险
[详细描述执行风险，如滑点风险、延迟风险等]

### 合规风险
[详细描述合规风险，如监管要求、数据使用等]

### 风险管理建议
[提供风险管理建议，如如何控制每笔交易风险、如何分散投资等]
```

### 2.7 实施步骤
```markdown
## 🧪 实施步骤

### 步骤 1: 策略理解
[详细描述如何理解和分析策略]

### 步骤 2: 数据准备
[详细描述如何获取和准备数据]

### 步骤 3: 策略实现
[详细描述如何在 Backtrader 中实现策略]

### 步骤 4: 回测验证
[详细描述如何进行历史回测和参数优化]

### 步骤 5: 模拟交易
[详细描述如何在模拟交易环境中测试策略]

### 步骤 6: 实盘验证
[详细描述如何进行小资金实盘验证]

### 步骤 7: 规模扩大
[详细描述如何在验证成功后扩大交易规模]
```

### 2.8 参数配置
```markdown
## ⚙️ 参数配置

### 策略参数
```python
params = (
    # 策略类型: [策略类型]
    # 回望周期
    ('lookback_period', 20),
    
    # 交易阈值
    ('threshold', 0.02),
    
    # 风险管理
    ('risk_per_trade', 0.02),
    ('stop_loss', 0.20),
    ('take_profit', 0.30),
    
    # 其他参数
    # ...
)
```

### 参数说明
[详细解释每个参数的含义和作用]

### 参数优化建议
[提供参数优化建议，如如何优化 lookback_period、threshold 等参数]
```

### 2.9 Backtrader 实现框架
```markdown
## 🧩 Backtrader 实现框架

```python
import backtrader as bt
import backtrader.indicators as btind
import numpy as np
import pandas as pd

class [策略名称]Strategy(bt.Strategy):
    """
    [策略名称] 策略
    
    策略类型: [策略类型]
    策略子类: [策略子类]
    
    核心逻辑:
    1. [步骤 1]
    2. [步骤 2]
    3. [步骤 3]
    4. [步骤 4]
    """
    
    params = (
        # 策略类型: [策略类型]
        # 回望周期
        ('lookback_period', 20),
        
        # 交易阈值
        ('threshold', 0.02),
        
        # 风险管理
        ('risk_per_trade', 0.02),
        ('stop_loss', 0.20),
        ('take_profit', 0.30),
        ('trailing_stop', 0.10),
        ('max_drawdown_limit', 0.20),
        
        # 交易成本
        ('commission', 0.001),
        ('slippage', 0.0005),
    )
    
    def __init__(self):
        super().__init__()
        
        # 数据引用
        self.dataclose = self.datas[0].close
        self.datahigh = self.datas[0].high
        self.datalow = self.datas[0].low
        self.dataopen = self.datas[0].open
        self.datavolume = self.datas[0].volume
        
        # 指标
        # [初始化技术指标，如移动平均、RSI、MACD、布林带等]
        
        # 策略状态
        self.signal = None
        self.entry_price = None
        self.highest_price = None
        
        # 订单
        self.order = None
        
        # 记录
        self.trades = []
        
        print(f"{self.__class__.__name__} 初始化完成")
        print(f"  策略类型: [策略类型]")
        print(f"  回望周期: {self.params.lookback_period}")
        print(f"  阈值: {self.params.threshold}")
    
    def next(self):
        """
        核心策略逻辑
        
        在每次 bar 更新时调用
        """
        # 确保有足够的数据
        if len(self.dataclose) < self.params.lookback_period:
            return
        
        # 计算指标
        # [计算技术指标，如移动平均、RSI、MACD、布林带等]
        
        # 生成信号
        # [生成交易信号]
        
        # 执行交易
        # [执行买入/卖出/平仓操作]
        
        # 风险控制
        # [执行止损、止盈、跟踪止损等]
    
    def manage_risk(self):
        """
        风险控制
        
        检查止损、止盈、跟踪止损等
        """
        pass
    
    def notify_order(self, order):
        """
        订单通知
        
        当订单状态变化时调用
        """
        pass
```

### 使用示例
[提供使用示例和说明]
```

### 2.10 参考链接
```markdown
## 🔗 参考链接

### 原始资源
- 原始文档: `[原始 HTML 文件名]`
- 来源: [来源网站或作者]
- URL: [URL 地址]

### 相关资源
- 相关论文: [列出相关的学术论文和研究]
- 相关博客: [列出相关的博客文章]
- 相关工具: [列出相关的工具和平台]
```

### 2.11 总结
```markdown
## 📝 总结

### 核心要点
1. [要点 1]
2. [要点 2]
3. [要点 3]

### 适用场景
- ✅ [适用场景 1]
- ✅ [适用场景 2]
- ✅ [适用场景 3]

### 不适用场景
- ❌ [不适用场景 1]
- ❌ [不适用场景 2]
- ❌ [不适用场景 3]

### 下一步
[提供下一步的建议和行动计划]
```

---

## 📋 **3. 策略类型分类**

### 3.1 策略类型定义

#### 3.1.1 动量策略 (Momentum Strategy)
- **定义**: 基于价格趋势延续性进行交易
- **核心逻辑**: 过去表现好的资产在未来也会表现好
- **关键指标**: 移动平均、动量指标、趋势指标
- **典型信号**: 金叉、突破、新高/新低

#### 3.1.2 均值回归 (Mean Reversion)
- **定义**: 利用价格回归到均值的特性进行交易
- **核心逻辑**: 价格偏离均值后会回归
- **关键指标**: 移动平均、标准差、布林带
- **典型信号**: 价格突破布林带、RSI 超买/超卖

#### 3.1.3 突破策略 (Breakout Strategy)
- **定义**: 当价格突破关键位置时进行交易
- **核心逻辑**: 突破支撑或阻力位时，价格会继续运行
- **关键指标**: 支撑/阻力位、Donchian 通道、价格通道
- **典型信号**: 价格突破上轨/下轨、价格突破高点/低点

#### 3.1.4 机器学习/AI 策略 (Machine Learning / AI Strategy)
- **定义**: 使用机器学习或 AI 模型预测市场方向
- **核心逻辑**: 基于历史数据训练模型，预测未来价格走势
- **关键指标**: 机器学习特征、模型预测、置信度
- **典型信号**: 模型预测上涨/下跌/横盘

#### 3.1.5 期权策略 (Option Strategy)
- **定义**: 使用期权作为交易工具
- **核心逻辑**: 利用期权的非线性和杠杆特性
- **关键指标**: 隐含波动率、希腊字母（Delta, Gamma, Theta, Vega）
- **典型信号**: 隐含波动率上升/下降、希腊字母信号

#### 3.1.6 波动率策略 (Volatility Strategy)
- **定义**: 基于市场波动率的特性进行交易
- **核心逻辑**: 波动率聚集和均值回归
- **关键指标**: 波动率指数（如 VIX）、ATR、真实波动率
- **典型信号**: 波动率上升/下降、波动率回归均值

#### 3.1.7 统计套利 (Statistical Arbitrage)
- **定义**: 利用统计关系进行套利
- **核心逻辑**: 资产之间的统计关系偏离均值时会回归
- **关键指标**: 协整关系、相关性、价差
- **典型信号**: 价差偏离阈值、协整关系变化

#### 3.1.8 投资组合优化 (Portfolio Optimization)
- **定义**: 优化资产配置
- **核心逻辑**: 通过优化算法最大化收益并最小化风险
- **关键指标**: 收益率、协方差矩阵、风险模型
- **典型信号**: 资产配置调整、权重优化

#### 3.1.9 风险管理 (Risk Management)
- **定义**: 风险控制和对冲
- **核心逻辑**: 通过对冲和风险控制降低投资组合风险
- **关键指标**: VaR、CVaR、最大回撤、夏普比率
- **典型信号**: 对冲信号、风险预警、止损信号

#### 3.1.10 收益预估 (Earnings Estimate)
- **定义**: 基于收益预估进行交易
- **核心逻辑**: 根据公司财报和市场预期进行交易
- **关键指标**: 实际收益 vs. 预期收益、收益惊喜
- **典型信号**: 收益惊喜正向/负向、实际收益高于/低于预期

### 3.2 策略类型自动分类规则

#### 规则 1: 动量策略
- **关键词**: momentum, trend, price action, price momentum, time series momentum, breakout
- **文件名模式**: *Momentum*, *Trend*, *Momentum*
- **分类**: 动量策略

#### 规则 2: 均值回归
- **关键词**: mean reversion, mean, reversion, dollar cost, average, regression
- **文件名模式**: *Mean*, *Reversion*
- **分类**: 均值回归

#### 规则 3: 突破策略
- **关键词**: breakout, channel, donchian, breakthrough, resistance, support
- **文件名模式**: *Breakout*, *Channel*, *Donchian*
- **分类**: 突破策略

#### 规则 4: 机器学习/AI
- **关键词**: machine learning, neural, ai, lstm, deep learning, random forest, gradient boosting
- **文件名模式**: *Machine*, *Learning*, *Neural*, *AI*
- **分类**: 机器学习/AI

#### 规则 5: 期权策略
- **关键词**: option, call, put, iron, condor, butterfly, straddle, spread
- **文件名模式**: *Option*, *Call*, *Put*, *Iron*, *Condor*
- **分类**: 期权策略

#### 规则 6: 波动率策略
- **关键词**: volatility, atr, std, vix, volatility index, implied volatility
- **文件名模式**: *Volatility*, *VIX*, *ATR*
- **分类**: 波动率策略

#### 规则 7: 统计套利
- **关键词**: pairs, arbitrage, cointegration, statistical arbitrage, pairs trading
- **文件名模式**: *Pairs*, *Arbitrage*, *Cointegration*
- **分类**: 统计套利

#### 规则 8: 投资组合优化
- **关键词**: optimization, portfolio, optimizer, mean-variance, efficient frontier
- **文件名模式**: *Optimization*, *Portfolio*, *Optimizer*
- **分类**: 投资组合优化

#### 规则 9: 风险管理
- **关键词**: risk, drawdown, sharpe, crash, protection, edge
- **文件名模式**: *Risk*, *Drawdown*, *Crash*, *Protection*
- **分类**: 风险管理

#### 规则 10: 收益预估
- **关键词**: earnings, estimate, ibes, estimize, forecast, analyst
- **文件名模式**: *Earnings*, *Estimate*, *IBES*, *Estimize*
- **分类**: 收益预估

#### 规则 11: 综合策略
- **关键词**: financial hacker, quantstrat trader, quantpedia, quantstart, robot wealth
- **文件名模式**: *Hacker*, *Trader*, *Pedia*, *Start*, *Wealth*
- **分类**: 综合策略

#### 规则 12: 其他策略
- **不匹配上述任何规则**: 分类为"其他策略"

---

## 📋 **4. 当前文件夹分析**

### 4.1 文件夹统计

- **总文档数**: 70 个（前 70 个已生成的 Markdown 文档）
- **文档格式**: Markdown (`.md`)
- **文档命名**: `XXX_Strategy_Name.md` (XXX = 索引)

### 4.2 策略类型分布

| 策略类型 | 数量 | 占比 |
|---------|------|------|
| **动量策略** | 10 | 14.3% |
| **期权策略** | 5 | 7.1% |
| **机器学习/AI** | 3 | 4.3% |
| **波动率策略** | 5 | 7.1% |
| **统计套利** | 2 | 2.9% |
| **投资组合优化** | 2 | 2.9% |
| **风险管理** | 1 | 1.4% |
| **收益预估** | 1 | 1.4% |
| **综合策略** | 5 | 7.1% |
| **其他策略** | 36 | 51.4% |

### 4.3 已完成的策略（前 30 个）

#### 高质量手动生成（策略 1-10）
1. SPX Iron Condor (期权策略)
2. Supervised Learning for Document Classification (机器学习/AI)
3. Volatility of Average [Only VIX] (波动率策略)
4. Adding a Risk-Free Rate to Your Analyses (投资组合优化)
5. Quantitative Momentum Research - Long-Term Return Reversal (动量策略)
6. Crash-Protecting Your Portfolio with CrashMetrics (风险管理)
7. Trading with Estimize and I/B/E/S Earnings Estimates Data (收益预估)
8. Day of Month Pattern or Luck for a Monthly ETF Rotation Strategy (动量策略)
9. Financial Hacker (综合策略)
10. QuantStrat TradeR (综合策略)

#### 高质量手动生成（策略 11-20）
11. Robot Wealth (机器人交易)
21. QuantStart (量化教程)
22. QuantInsti (量化研究/因子投资)

#### 10 倍速生成（策略 21-70）
23-30. 策略 21-30 (10 倍速生成，各种类型)
31-40. 策略 31-40 (10 倍速生成，各种类型)
41-50. 策略 41-50 (10 倍速生成，各种类型)
51-70. 策略 51-70 (10 倍速生成，各种类型)

---

## 📋 **5. 提示词使用指南**

### 5.1 任务输入
- **原始 HTML 文件**: `/home/yun/Downloads/论文/论文/[策略名称].html`
- **输出目录**: `/home/yun/Documents/backtrader_web/strategies/`
- **进度文件**: `/home/yun/Documents/backtrader_web/strategies/99_PROGRESS.json`

### 5.2 任务执行流程
1. **读取 HTML 文件**: 读取原始 HTML 文件内容
2. **分析策略内容**: 分析 HTML 文件中的策略内容
3. **分类策略类型**: 根据文件名和内容自动分类策略类型
4. **提取关键信息**: 提取策略的关键信息（标题、描述、参数等）
5. **生成 Markdown 文档**: 根据模板生成高质量 Markdown 文档
6. **保存文档**: 保存 Markdown 文档到输出目录
7. **更新进度**: 更新进度文件

### 5.3 质量要求
- **详细性**: 文档必须详细，包含所有必要的章节
- **准确性**: 文档必须准确，不包含错误信息
- **可读性**: 文档必须易于阅读，结构清晰
- **专业性**: 文档必须专业，使用适当的术语和格式
- **完整性**: 文档必须完整，包含所有必要的部分

### 5.4 格式要求
- **标题**: 使用 H1 标题
- **章节**: 使用 H2 标题
- **子章节**: 使用 H3 标题
- **代码块**: 使用 ```python 或 ```markdown 代码块
- **列表**: 使用无序列表和有序列表
- **强调**: 使用 **粗体**、*斜体*、`代码`等强调
- **分割线**: 使用 --- 分割主要部分

---

## 📋 **6. 提示词模板**

### 6.1 标准提示词模板

```
你是一个专业的量化交易策略分析师和文档编写者。你的任务是为给定的策略 HTML 文件生成高质量、详细、专业的 Markdown 格式策略文档。

## 输入文件
HTML 文件路径: [HTML 文件路径]

## 策略分析
1. 仔细阅读 HTML 文件内容
2. 分析策略的核心逻辑和思想
3. 识别策略的关键参数和指标
4. 提取策略的优势和风险

## 文档生成要求
1. 生成详细的 Markdown 文档
2. 文档必须包含以下章节：
   - 标题（H1）
   - 策略概述（H2）
   - 策略逻辑（H2）
   - 需要的数据（H2）
   - 策略有效性原因（H2）
   - 风险和注意事项（H2）
   - 实施步骤（H2）
   - 参数配置（H2）
   - Backtrader 实现框架（H2）
   - 参考链接（H2）
3. 每个章节必须详细、专业、准确
4. 使用适当的术语和格式
5. 包含代码示例和说明

## 策略类型分类
根据文件名和内容，自动分类策略类型：
- 动量策略 (Momentum)
- 均值回归 (Mean Reversion)
- 突破策略 (Breakout)
- 机器学习/AI (Machine Learning)
- 期权策略 (Option)
- 波动率策略 (Volatility)
- 统计套利 (Statistical Arbitrage)
- 投资组合优化 (Portfolio Optimization)
- 风险管理 (Risk Management)
- 收益预估 (Earnings Estimate)
- 综合策略 (Comprehensive)
- 其他策略 (Other)

## 输出格式
将生成的 Markdown 文档保存到: /home/yun/Documents/backtrader_web/strategies/[文件名].md

## 质量标准
- 详细性: 文档必须详细，包含所有必要的章节
- 准确性: 文档必须准确，不包含错误信息
- 可读性: 文档必须易于阅读，结构清晰
- 专业性: 文档必须专业，使用适当的术语和格式
- 完整性: 文档必须完整，包含所有必要的部分
```

### 6.2 高质量提示词模板

```
你是一个资深的量化交易策略专家和文档编写者。你的任务是为给定的策略 HTML 文件生成**顶级质量、极其详细、全面、专业**的 Markdown 格式策略文档。

## 核心目标
生成一份**生产级**的策略文档，该文档可以被直接用于：
1. 学习和实施该策略
2. 在 Backtrader 中实现该策略
3. 在实盘交易中使用该策略
4. 作为该策略的参考文档

## 输入文件
HTML 文件路径: [HTML 文件路径]

## 策略分析流程
1. **深入分析**: 深入分析 HTML 文件的内容，理解策略的每一个细节
2. **逻辑梳理**: 梳理策略的核心逻辑、算法、参数
3. **理论支撑**: 识别策略的理论支撑（学术研究、数学模型）
4. **实证验证**: 识别策略的实证验证（回测结果、实盘表现）
5. **风险识别**: 识别策略的所有风险（市场风险、策略风险、执行风险）
6. **实施路径**: 制定详细的实施路径和步骤

## 文档结构（必须包含）
### 标题
```markdown
# [策略名称]

**策略类型**: [策略类型]
**策略子类**: [策略子类]
**原始文件**: [HTML 文件名]
```

### 1. 策略概述（必须详细）
```markdown
## 📋 策略概述

### 核心思想
[详细的策略核心思想描述，至少 3-5 段]

### 策略优势（至少 5 点）
- ✅ [详细描述优势 1]
- ✅ [详细描述优势 2]
- ✅ [详细描述优势 3]
- ✅ [详细描述优势 4]
- ✅ [详细描述优势 5]

### 策略特点（至少 5 点）
- [详细描述特点 1]
- [详细描述特点 2]
- [详细描述特点 3]
- [详细描述特点 4]
- [详细描述特点 5]

### 适用市场
- [详细描述适用的市场和环境]

### 不适用市场
- [详细描述不适用的情况]
```

### 2. 策略逻辑（必须详细，包含代码）
```markdown
## 🧠 策略逻辑

### 核心步骤（详细的步骤流程）
1. [步骤 1: 详细描述，至少 2-3 句]
2. [步骤 2: 详细描述，至少 2-3 句]
3. [步骤 3: 详细描述，至少 2-3 句]
4. [步骤 4: 详细描述，至少 2-3 句]

### 技术指标（必须详细，包含代码）
```python
# [指标 1]
[详细的 Python 代码，包含说明]
```

```python
# [指标 2]
[详细的 Python 代码，包含说明]
```

### 信号生成（必须详细，包含逻辑和代码）
```python
def generate_signals(prices, indicators):
    """
    生成交易信号
    
    Args:
        prices: 价格数据
        indicators: 技术指标
    
    Returns:
        signals: 交易信号
    """
    # [详细的 Python 代码，包含说明]
    
    return signals
```

### 仓位管理（必须详细，包含公式和代码）
```python
def calculate_position_size(account_value, signal_strength, risk_per_trade):
    """
    计算仓位大小
    
    Args:
        account_value: 账户价值
        signal_strength: 信号强度
        risk_per_trade: 每笔交易风险
    
    Returns:
        position_size: 仓位大小
    """
    # [详细的 Python 代码，包含说明和公式]
    
    return position_size
```

### 风险控制（必须详细，包含逻辑和代码）
```python
def manage_risk(current_price, entry_price, stop_loss, take_profit, trailing_stop):
    """
    风险控制
    
    Args:
        current_price: 当前价格
        entry_price: 入场价格
        stop_loss: 止损比例
        take_profit: 止盈比例
        trailing_stop: 跟踪止损比例
    
    Returns:
        action: 风险控制动作（hold, close, etc.）
    """
    # [详细的 Python 代码，包含说明]
    
    return action
```
```

### 3. 需要的数据（必须详细）
```markdown
## 📊 需要的数据

### 价格数据（必需）
- **OHLC 数据**: 开盘价、最高价、最低价、收盘价（详细说明）
- **成交量数据**: 成交量（详细说明）
- **调整收盘价**: 考虑分红、拆股的调整收盘价（详细说明）
- **时间范围**: 至少 1-2 年的历史数据（详细说明）

### 指标数据（推荐）
- **技术指标数据**: [列出所有需要的指标，如移动平均、RSI、MACD、布林带等]
- **市场指标数据**: [列出所有需要的市场指标，如 VIX 等]

### 基本面数据（可选）
- **财报数据**: [列出需要的财报数据]
- **分红数据**: [列出需要的分红数据]

### 宏观经济数据（可选）
- **利率数据**: [列出需要的利率数据]
- **通胀率数据**: [列出需要的通胀率数据]
```

### 4. 策略有效性原因（必须详细，包含学术引用）
```markdown
## ✅ 策略有效性原因

### 理论支撑（必须包含学术引用）
- **理论 1**: [详细描述理论 1，包含学术引用]
- **理论 2**: [详细描述理论 2，包含学术引用]
- **理论 3**: [详细描述理论 3，包含学术引用]

### 实证证据（必须包含数据支持）
- **回测结果**: [详细的回测结果，包含收益率、夏普比率、最大回撤等]
- **实盘表现**: [详细的实盘表现，包括年化收益率等]

### 学术研究（必须列出相关论文）
- **论文 1**: [论文标题，作者，年份，链接]
- **论文 2**: [论文标题，作者，年份，链接]
- **论文 3**: [论文标题，作者，年份，链接]

### 行业应用（必须包含案例）
- **案例 1**: [详细描述案例 1]
- **案例 2**: [详细描述案例 2]
- **案例 3**: [详细描述案例 3]
```

### 5. 风险和注意事项（必须详细）
```markdown
## ⚠️ 风险和注意事项

### 市场风险（必须详细）
- **风险 1**: [详细描述市场风险 1，至少 2-3 句]
- **风险 2**: [详细描述市场风险 2，至少 2-3 句]
- **风险 3**: [详细描述市场风险 3，至少 2-3 句]

### 策略风险（必须详细）
- **风险 1**: [详细描述策略风险 1，至少 2-3 句]
- **风险 2**: [详细描述策略风险 2，至少 2-3 句]
- **风险 3**: [详细描述策略风险 3，至少 2-3 句]

### 执行风险（必须详细）
- **风险 1**: [详细描述执行风险 1，至少 2-3 句]
- **风险 2**: [详细描述执行风险 2，至少 2-3 句]
- **风险 3**: [详细描述执行风险 3，至少 2-3 句]

### 合规风险（必须详细）
- **风险 1**: [详细描述合规风险 1，至少 2-3 句]
- **风险 2**: [详细描述合规风险 2，至少 2-3 句]
- **风险 3**: [详细描述合规风险 3，至少 2-3 句]

### 风险管理建议（必须详细，至少 5 点）
- [详细的风险管理建议 1]
- [详细的风险管理建议 2]
- [详细的风险管理建议 3]
- [详细的风险管理建议 4]
- [详细的风险管理建议 5]
```

### 6. 实施步骤（必须详细，每个步骤至少 3-5 句）
```markdown
## 🧪 实施步骤

### 步骤 1: 策略理解（必须详细，至少 5-10 句）
- [详细的步骤 1 说明，至少 5-10 句]

### 步骤 2: 数据准备（必须详细，至少 5-10 句）
- [详细的步骤 2 说明，至少 5-10 句]

### 步骤 3: 策略实现（必须详细，至少 5-10 句）
- [详细的步骤 3 说明，至少 5-10 句]

### 步骤 4: 回测验证（必须详细，至少 5-10 句）
- [详细的步骤 4 说明，至少 5-10 句]

### 步骤 5: 参数优化（必须详细，至少 5-10 句）
- [详细的步骤 5 说明，至少 5-10 句]

### 步骤 6: 模拟交易（必须详细，至少 5-10 句）
- [详细的步骤 6 说明，至少 5-10 句]

### 步骤 7: 实盘验证（必须详细，至少 5-10 句）
- [详细的步骤 7 说明，至少 5-10 句]

### 步骤 8: 规模扩大（必须详细，至少 5-10 句）
- [详细的步骤 8 说明，至少 5-10 句]
```

### 7. 参数配置（必须详细，包含优化建议）
```markdown
## ⚙️ 参数配置

### 策略参数（必须详细）
```python
params = (
    # 策略类型: [策略类型]
    # 回望周期
    ('lookback_period', 20),  # [详细说明该参数]
    
    # 交易阈值
    ('threshold', 0.02),  # [详细说明该参数]
    
    # 风险管理
    ('risk_per_trade', 0.02),  # [详细说明该参数，例如每笔交易风险 2%]
    ('stop_loss', 0.20),  # [详细说明该参数，例如从入场价格下跌 20%]
    ('take_profit', 0.30),  # [详细说明该参数，例如从入场价格上涨 30%]
    ('trailing_stop', 0.10),  # [详细说明该参数，例如从最高点下跌 10%]
    
    # 交易成本
    ('commission', 0.001),  # [详细说明该参数，例如佣金比例 0.1%]
    ('slippage', 0.0005),  # [详细说明该参数，例如滑点比例 0.05%]
)
```

### 参数说明（必须详细，每个参数至少 2-3 句）
- [参数 1 详细说明，至少 2-3 句]
- [参数 2 详细说明，至少 2-3 句]
- [参数 3 详细说明，至少 2-3 句]

### 参数优化建议（必须详细）
- [优化建议 1: 详细描述，至少 3-5 句]
- [优化建议 2: 详细描述，至少 3-5 句]
- [优化建议 3: 详细描述，至少 3-5 句]

### 参数敏感性分析（必须详细）
- [敏感性分析 1: 详细描述，至少 3-5 句]
- [敏感性分析 2: 详细描述，至少 3-5 句]
```

### 8. Backtrader 实现框架（必须详细，包含完整的代码）
```markdown
## 🧩 Backtrader 实现框架

```python
import backtrader as bt
import backtrader.indicators as btind
import numpy as np
import pandas as pd

class [策略名称]Strategy(bt.Strategy):
    """
    [策略名称] 策略
    
    策略类型: [策略类型]
    策略子类: [策略子类]
    
    核心逻辑:
    1. [步骤 1]
    2. [步骤 2]
    3. [步骤 3]
    4. [步骤 4]
    
    文档版本: 1.0
    更新日期: 2026-02-04
    
    参考文献:
    - [论文 1]
    - [论文 2]
    - [论文 3]
    """
    
    params = (
        # 策略类型: [策略类型]
        # 回望周期
        ('lookback_period', 20),
        
        # 交易阈值
        ('threshold', 0.02),
        
        # 风险管理
        ('risk_per_trade', 0.02),
        ('stop_loss', 0.20),
        ('take_profit', 0.30),
        ('trailing_stop', 0.10),
        ('max_drawdown_limit', 0.20),
        
        # 交易成本
        ('commission', 0.001),
        ('slippage', 0.0005),
    )
    
    def __init__(self):
        super().__init__()
        
        # 数据引用
        self.dataclose = self.datas[0].close
        self.datahigh = self.datas[0].high
        self.datalow = self.datas[0].low
        self.dataopen = self.datas[0].open
        self.datavolume = self.datas[0].volume
        
        # 指标
        # [初始化所有必要的技术指标]
        self.indicator1 = btind.SMA(self.dataclose, period=self.params.lookback_period)
        self.indicator2 = btind.RSI(self.dataclose, period=14)
        
        # 策略状态
        self.signal = None
        self.entry_price = None
        self.highest_price = None
        
        # 订单
        self.order = None
        
        # 记录
        self.trades = []
        
        print(f"{self.__class__.__name__} 初始化完成")
        print(f"  策略类型: [策略类型]")
        print(f"  回望周期: {self.params.lookback_period}")
        print(f"  阈值: {self.params.threshold}")
    
    def next(self):
        """
        核心策略逻辑
        
        在每次 bar 更新时调用
        """
        # 确保有足够的数据
        if len(self.dataclose) < self.params.lookback_period:
            return
        
        # 计算指标
        # [计算所有必要的技术指标]
        
        # 生成信号
        # [生成买入/卖出/持有信号]
        
        # 执行交易
        # [执行买入/卖出/平仓操作]
        
        # 风险控制
        # [执行止损、止盈、跟踪止损等]
    
    def manage_risk(self):
        """
        风险控制
        
        检查止损、止盈、跟踪止损等
        """
        # [详细的风险控制逻辑]
    
    def notify_order(self, order):
        """
        订单通知
        
        当订单状态变化时调用
        """
        # [详细的订单通知逻辑]
```

### 使用示例
[提供详细的使用示例和说明]

### 调试建议
[提供详细的调试建议和常见问题解决方案]
```

### 9. 参考链接（必须详细）
```markdown
## 🔗 参考链接

### 原始资源
- **原始文档**: `[原始 HTML 文件名]`
- **来源**: [来源网站或作者]
- **URL**: [URL 地址]

### 相关资源
- **相关论文**: [列出相关的学术论文和研究，至少 3-5 篇]
- **相关博客**: [列出相关的博客文章，至少 3-5 篇]
- **相关工具**: [列出相关的工具和平台，至少 3-5 个]

### 学术引用
[使用规范的学术引用格式，列出所有引用的论文和研究]
```

### 10. 总结（必须详细，至少 10 点）
```markdown
## 📝 总结

### 核心要点（必须详细，至少 10 点）
1. [核心要点 1]
2. [核心要点 2]
3. [核心要点 3]
4. [核心要点 4]
5. [核心要点 5]
6. [核心要点 6]
7. [核心要点 7]
8. [核心要点 8]
9. [核心要点 9]
10. [核心要点 10]

### 适用场景（必须详细，至少 5 个）
- ✅ [适用场景 1]
- ✅ [适用场景 2]
- ✅ [适用场景 3]
- ✅ [适用场景 4]
- ✅ [适用场景 5]

### 不适用场景（必须详细，至少 5 个）
- ❌ [不适用场景 1]
- ❌ [不适用场景 2]
- ❌ [不适用场景 3]
- ❌ [不适用场景 4]
- ❌ [不适用场景 5]

### 下一步（必须详细，至少 5 个行动）
- [行动 1]
- [行动 2]
- [行动 3]
- [行动 4]
- [行动 5]
```

## 文档格式要求

### 标题格式
- 使用 H1 作为主标题
- 使用 H2 作为主要章节标题
- 使用 H3 作为子章节标题

### 代码格式
- 使用 ```python 或 ```markdown 代码块
- 在代码块中添加详细的注释和说明
- 使用适当的缩进和格式

### 列表格式
- 使用无序列表 (-) 列举优点、特点等
- 使用有序列表 (1. 2. 3.) 列举步骤、要点等
- 使用嵌套列表组织复杂内容

### 强调格式
- 使用 **粗体** 强调重要术语
- 使用 *斜体* 强调注意事项
- 使用 `代码` 强调参数、变量名等
- 使用 --- 分割主要部分

### 表格格式
- 使用 Markdown 表格展示数据和统计
- 表格应清晰、易读

## 质量标准

### 详细性
- 每个章节必须详细，至少包含 3-5 个段落
- 代码示例必须有详细的注释和说明
- 实施步骤必须具体，每个步骤至少 3-5 句说明

### 准确性
- 所有信息必须准确，不包含错误
- 代码示例必须正确，能够运行
- 参考链接必须有效

### 可读性
- 结构必须清晰，层次分明
- 语言必须专业、准确
- 格式必须统一、规范

### 专业性
- 使用专业术语和概念
- 引用学术研究和行业案例
- 提供专业的实施建议

### 完整性
- 必须包含所有 10 个主要章节
- 每个章节必须包含所有子章节
- 不能遗漏任何重要内容

## 输出要求

### 输出路径
- 输出目录: `/home/yun/Documents/backtrader_web/strategies/`
- 文件命名: `XXX_[策略名称].md` (XXX = 索引)
- 文件格式: Markdown (`.md`)

### 文件编码
- 编码: UTF-8
- 换行符: LF (Unix 风格)

### 进度更新
- 每生成一个文档，更新进度文件
- 进度文件: `/home/yun/Documents/backtrader_web/strategies/99_PROGRESS.json`
- 进度文件格式: JSON

## 最终检查清单

在生成文档之前，请检查：

- [ ] 文档包含所有 10 个主要章节
- [ ] 每个章节都有详细的子章节
- [ ] 代码示例都有详细的注释和说明
- [ ] 策略逻辑部分包含完整的 Python 代码
- [ ] Backtrader 实现框架包含完整的代码
- [ ] 参考链接包含所有必要的资源
- [ ] 文档格式符合要求
- [ ] 文档质量达到标准
```

---

## 📋 **7. 注意事项**

### 7.1 必须避免的错误
1. **缺少章节**: 不能缺少任何章节
2. **内容过于简单**: 内容不能过于简单，必须详细
3. **代码没有注释**: 代码必须有详细的注释和说明
4. **引用不准确**: 引用必须准确，包含所有必要信息
5. **格式不规范**: 格式必须符合要求

### 7.2 必须包含的内容
1. **详细的策略概述**: 至少 3-5 段核心思想描述
2. **详细的策略逻辑**: 必须包含完整的 Python 代码
3. **详细的实施步骤**: 每个步骤至少 3-5 句说明
4. **详细的参数配置**: 每个参数至少 2-3 句说明
5. **详细的参考链接**: 必须包含所有必要的资源链接

### 7.3 优先级顺序
1. **最高优先级**: 策略概述、策略逻辑、需要的数据
2. **高优先级**: 策略有效性原因、风险和注意事项
3. **中优先级**: 实施步骤、参数配置
4. **低优先级**: 参考链接、总结

---

**生成时间**: 2026-02-04
**版本**: 1.0
**状态**: ✅ 完成
