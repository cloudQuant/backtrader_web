# MACD ATR动态止损策略 (MACD ATR Strategy)

## 策略简介

MACD ATR策略基于MACD金叉和SMA方向过滤的入场策略，使用ATR计算动态移动止损来保护利润。

## 策略原理

### 指标说明

- **MACD**: 趋势动量指标
- **SMA**: 用于判断趋势方向
- **ATR (Average True Range)**: 衡量波动率，用于计算动态止损

### 交易规则

**开仓条件（需同时满足）：**
- MACD金叉（MACD线上穿信号线）
- SMA方向为负（逆势入场）

**平仓条件：**
- 收盘价跌破ATR动态止损价

**止损规则：**
- 止损价 = 入场价 - ATR * atrdist
- 止损价随价格上涨向上移动（ trailing stop ）

## 策略参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| macd1 | 12 | MACD快线周期 |
| macd2 | 26 | MACD慢线周期 |
| macdsig | 9 | MACD信号线周期 |
| atrperiod | 14 | ATR周期 |
| atrdist | 3.0 | ATR止损距离倍数 |
| smaperiod | 30 | SMA周期 |
| dirperiod | 10 | SMA方向判断周期 |

## 适用场景

- 波动率变化较大的市场
- 需要动态止损的风险管理
- 适合逆势抄底策略

## 风险提示

1. 逆势交易风险较高
2. 需要合理设置ATR倍数
3. 在强趋势中可能过早离场

## 回测表现

基于Yahoo股票(YHOO) 2005-2014年数据回测：
- 初始资金：50,000美元
- 总交易次数：46笔
- 胜率：37.78%
- 最终资金：49,993.58美元
- 年化收益率：接近0%
- 最大回撤：7.56%

## 文件说明

- `config.yaml`: 策略配置文件
- `strategy_macd_atr.py`: 策略实现代码
- `README.md`: 策略说明文档
