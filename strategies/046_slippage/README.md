# 滑点模拟策略 (Slippage Strategy)

## 策略简介

滑点模拟策略演示了如何在回测中考虑滑点对交易绩效的影响。滑点是指预期执行价格与实际执行价格之间的差异，是真实交易中不可避免的市场摩擦。

## 策略原理

### 什么是滑点

滑点是交易中的重要成本因素：

| 类型 | 说明 |
|------|------|
| 市价滑点 | 市价单成交价与预期价格的偏差 |
| 限价滑点 | 限价单可能无法成交 |
| 流动性滑点 | 大单对市场价格的影响 |

### 策略逻辑

1. **入场条件**：快速SMA上穿慢速SMA（金叉）
2. **出场条件**：快速SMA下穿慢速SMA（死叉）
3. **滑点设置**：每笔交易按设定百分比计算滑点

### 技术指标

- **快速SMA**（默认10周期）
- **慢速SMA**（默认30周期）
- **交叉信号**：双均线金叉/死叉

## 策略参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `p1` | 10 | 快速SMA周期 |
| `p2` | 30 | 慢速SMA周期 |
| `slippage_perc` | 0.01 | 滑点百分比（1%） |

## 滑点对绩效的影响

滑点会显著影响回测结果：

| 情况 | 无滑点 | 1%滑点 | 影响 |
|------|--------|--------|------|
| 交易成本 | 仅佣金 | +滑点 | 增加成本 |
| 收益率 | 较高 | 降低 | 可能转盈为亏 |
| 夏普比率 | 较高 | 降低 | 风险调整后收益下降 |

## 适用场景

1. **策略评估**：评估策略对滑点的敏感性
2. **风险测试**：测试策略的最坏情况
3. **成本估算**：估算真实交易成本

## 风险提示

1. **实际滑点**：实际交易中滑点可能大于回测设置
2. **市场状况**：波动剧烈时滑点更大
3. **订单类型**：市价单滑点通常大于限价单
4. **资产类别**：不同资产的滑点特征不同

## 滑点设置建议

| 资产类别 | 建议滑点 |
|----------|----------|
| 大盘股 | 0.05% - 0.1% |
| 中小盘股 | 0.1% - 0.5% |
| 期货 | 1-2个tick |
| 外汇 | 0.01% - 0.05% |
| 加密货币 | 0.1% - 1%+ |

## 使用示例

```python
import backtrader as bt
from strategy_slippage import SlippageStrategy, load_config

# 加载配置
config = load_config()

# 创建Cerebro引擎
cerebro = bt.Cerebro(stdstats=True)
cerebro.broker.setcash(50000)

# 设置滑点（1%）
cerebro.broker.set_slippage_perc(0.01)

# 添加策略
cerebro.addstrategy(SlippageStrategy, **config['params'])

# 运行回测
results = cerebro.run()
```

## 参考来源

- Backtrader官方示例：backtrader-master2/samples/slippage/slippage.py
