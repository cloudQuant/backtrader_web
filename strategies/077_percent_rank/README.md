# 百分位排名策略 (Percent Rank Strategy)

## 策略简介

百分位排名策略是一个基于MACD柱状图百分位排名的均值回归策略。该策略通过计算MACD柱状图在历史数据中的百分位排名，识别极端超买超卖状态，在均值回归时进行交易。

## 策略原理

### 核心思想
- MACD柱状图的百分位排名可以反映当前动量在历史中的位置
- 极端低位后回升意味着均值回归机会
- 极端高位后回落意味着均值回归机会
- 采用两阶段确认机制：先触发极端状态，再等待确认

### 交易规则
**买入条件：**
- 百分位排名 <= 10%（触发极端低位）
- 随后百分位排名 >= 30%（确认回升）

**卖出条件：**
- 百分位排名 >= 90%（触发极端高位）
- 随后百分位排名 <= 70%（确认回落）

## 策略参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| stake | 10 | 每次交易的数量 |
| percent_period | 200 | 百分位排名计算周期 |
| limit1 | 10 | 触发阈值（%） |
| limit2 | 30 | 确认阈值（%） |
| period1 | 12 | MACD快速EMA周期 |
| period2 | 26 | MACD慢速EMA周期 |

## 适用场景

- 震荡市或均值回归明显的市场
- 流动性好的主流品种
- 适合中长期持仓

## 风险提示

1. **趋势延续风险**：在强趋势中均值回归可能失效
2. **确认延迟**：两阶段确认可能错过最佳入场点
3. **参数敏感**：百分位周期和阈值需要针对不同品种调整
4. **极端风险**：市场可能持续处于极端状态

## 回测结果

基于Oracle（ORCL）股票数据（2000-2014）回测：
- 总交易天数：3548
- 夏普比率：0.868
- 年化收益率：0.020%
- 最大回撤：11.56%
- 最终资金：100,302.26

## 参考文献

- Reference: https://github.com/backtrader/backhacker
